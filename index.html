<!------------------------- å‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ HTML5 æ–‡æ¡£ ------------------------->
<!DOCTYPE html>

<!------------------------- htmlï¼šæ•´ä¸ªç½‘é¡µçš„æ ¹å®¹å™¨ ------------------------->
<html>

    <!------------------------- headï¼šç½‘é¡µå¤´éƒ¨ä¿¡æ¯ï¼Œç”¨æˆ·çœ‹ä¸åˆ°çš„è®¾ç½® ------------------------->
    <head>
        <title>Prompt Tagger - å›¾ç‰‡æ ‡ç­¾ç”Ÿæˆå·¥å…·</title>
        
        <!------------------------- styleï¼šCSSæ ·å¼ä»£ç ï¼Œç¾åŒ–é¡µé¢ ------------------------->
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 20px;
                background-color: #f5f5f5;
                height: 100vh;
                overflow: hidden;
            }
            
            .header-section {
                text-align: center;
                margin-bottom: 20px;
                padding: 15px;
                background-color: white;
                border-radius: 8px;
                border: 2px solid #007bff;
            }
            
            .main-container {
                display: flex;
                height: calc(100vh - 140px);
                gap: 20px;
            }
            
            .left-panel {
                flex: 1;
                background-color: white;
                border-radius: 8px;
                padding: 20px;
                overflow-y: auto;
                border: 2px solid #28a745;
            }
            
            .right-panel {
                flex: 1;
                background-color: white;
                border-radius: 8px;
                padding: 20px;
                border: 2px solid #dc3545;
                display: flex;
                flex-direction: column;
            }
            
            .panel-title {
                font-size: 18px;
                font-weight: bold;
                color: #333;
                margin-bottom: 15px;
                padding: 10px;
                background-color: #f8f9fa;
                border-radius: 5px;
                text-align: center;
            }
            
            .category-section {
                margin: 15px 0;
                padding: 15px;
                border: 2px solid #ddd;
                border-radius: 8px;
                background-color: #fafafa;
            }
            
            .category-title {
                font-size: 16px;
                font-weight: bold;
                color: #333;
                margin-bottom: 10px;
                padding: 8px;
                background-color: #e9ecef;
                border-radius: 5px;
            }
            
            .dropdown-item {
                margin: 8px 0;
                padding: 8px;
                border: 1px solid #eee;
                border-radius: 5px;
                background-color: white;
            }
            
            label {
                display: block;
                font-weight: bold;
                margin-bottom: 5px;
                color: #555;
                font-size: 14px;
            }
            
            select {
                width: 100%;
                padding: 6px;
                font-size: 14px;
                border: 2px solid #ddd;
                border-radius: 4px;
                background-color: white;
            }
            
            select:focus {
                border-color: #007bff;
                outline: none;
            }
            
            .control-buttons {
                text-align: center;
                margin-bottom: 15px;
                padding: 10px;
                background-color: #f8f9fa;
                border-radius: 8px;
                border: 1px solid #ddd;
            }
            
            button {
                background-color: #007bff;
                color: white;
                font-size: 14px;
                padding: 8px 12px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                margin: 3px;
            }
            
            button:hover {
                background-color: #0056b3;
            }
            
            .load-btn {
                background-color: #28a745;
            }
            
            .load-btn:hover {
                background-color: #218838;
            }
            
            .preview-btn {
                background-color: #17a2b8;
            }
            
            .preview-btn:hover {
                background-color: #138496;
            }
            
            .generate-btn {
                background-color: #dc3545;
            }
            
            .generate-btn:hover {
                background-color: #c82333;
            }
            
            .download-btn {
                background-color: #6f42c1;
                font-size: 16px;
                padding: 12px 20px;
            }
            
            .download-btn:hover {
                background-color: #5a32a3;
            }
            
            .clear-btn {
                background-color: #6c757d;
            }
            
            .clear-btn:hover {
                background-color: #545b62;
            }
            
            #result {
                flex: 1;
                padding: 15px;
                border: 1px solid #ccc;
                border-radius: 5px;
                background-color: #f9f9f9;
                font-family: monospace;
                line-height: 1.5;
                overflow-y: auto;
                margin-top: 10px;
                font-size: 13px;
            }
            
            .filename-input {
                margin: 10px 0;
                padding: 10px;
                background-color: #e9ecef;
                border-radius: 5px;
                border: 1px solid #ddd;
            }
            
            .filename-input input {
                width: 70%;
                padding: 8px;
                border: 2px solid #ddd;
                border-radius: 4px;
                font-size: 14px;
            }
            
            .filename-input input:focus {
                border-color: #007bff;
                outline: none;
            }
        </style>
        <!------------------------- styleç»“æŸ ------------------------->
    </head>
    <!------------------------- headç»“æŸ ------------------------->

    <!------------------------- bodyï¼šç½‘é¡µä¸»ä½“å†…å®¹ï¼Œç”¨æˆ·èƒ½çœ‹åˆ°çš„éƒ¨åˆ† ------------------------->
    <body>
        
        <!------------------------- divï¼šé¡µé¢å¤´éƒ¨åŒºåŸŸ ------------------------->
        <div class="header-section">
            <h1>ğŸ¯ Prompt Tagger - å›¾ç‰‡æ ‡ç­¾ç”Ÿæˆå·¥å…·</h1>
            <p>ğŸ“ é€‰æ‹©æ ‡ç­¾æšä¸¾ï¼Œç”Ÿæˆå›¾ç‰‡æè¿°æ–‡æœ¬ï¼Œä¸‹è½½ä¸º .txt æ–‡ä»¶</p>
        </div>
        <!------------------------- divç»“æŸ ------------------------->

        <!------------------------- divï¼šä¸»å®¹å™¨ï¼Œå·¦å³åˆ†æ  ------------------------->
        <div class="main-container">
            
            <!------------------------- divï¼šå·¦ä¾§é¢æ¿ï¼Œæšä¸¾é€‰æ‹©åŒºåŸŸ ------------------------->
            <div class="left-panel">
                <div class="panel-title">ğŸ“‹ æ ‡ç­¾é€‰æ‹©åŒºåŸŸ</div>
                
                <!------------------------- divï¼šæ§åˆ¶æŒ‰é’®åŒºåŸŸ ------------------------->
                <div class="control-buttons">
                    <button class="load-btn" onclick="Load_All_Enums()">ğŸ”„ åŠ è½½æ ‡ç­¾é€‰é¡¹</button>
                    <button class="clear-btn" onclick="Clear_All_Selections()">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰é€‰æ‹©</button>
                </div>
                <!------------------------- divç»“æŸ ------------------------->
                
                <!------------------------- divï¼šä¸‹æ‹‰æ¡†å®¹å™¨åŒºåŸŸ ------------------------->
                <div id="dropdowns_container">
                    <div style="text-align: center; padding: 40px; color: #666;">
                        ğŸ’¡ ç‚¹å‡»"åŠ è½½æ ‡ç­¾é€‰é¡¹"æŒ‰é’®å¼€å§‹
                    </div>
                </div>
                <!------------------------- divç»“æŸ ------------------------->
            </div>
            <!------------------------- divç»“æŸ ------------------------->

            <!------------------------- divï¼šå³ä¾§é¢æ¿ï¼Œç»“æœé¢„è§ˆåŒºåŸŸ ------------------------->
            <div class="right-panel">
                <div class="panel-title">ğŸ“ ç»“æœé¢„è§ˆåŒºåŸŸ</div>
                
                <!------------------------- divï¼šæ–‡ä»¶åè¾“å…¥åŒºåŸŸ ------------------------->
                <div class="filename-input">
                    <label for="filename">ğŸ“„ æ–‡ä»¶åï¼š</label>
                    <input type="text" id="filename" placeholder="è¾“å…¥æ–‡ä»¶åï¼ˆä¸éœ€è¦.txtåç¼€ï¼‰" value="prompt">
                </div>
                <!------------------------- divç»“æŸ ------------------------->
                
                <!------------------------- divï¼šæ§åˆ¶æŒ‰é’®åŒºåŸŸ ------------------------->
                <div class="control-buttons">
                    <button class="preview-btn" onclick="Preview_Result()">ğŸ‘ï¸ é¢„è§ˆç»“æœ</button>
                    <button class="generate-btn" onclick="Generate_Result()">âœ¨ ç”Ÿæˆç»“æœ</button>
                    <button class="download-btn" onclick="Download_Result()">ğŸ’¾ ä¸‹è½½ç»“æœ</button>
                </div>
                <!------------------------- divç»“æŸ ------------------------->
                
                <!------------------------- divï¼šç»“æœæ˜¾ç¤ºåŒºåŸŸ ------------------------->
                <div id="result">
                    ğŸ’¡ ç‚¹å‡»"é¢„è§ˆç»“æœ"æŒ‰é’®æŸ¥çœ‹ç”Ÿæˆçš„æ ‡ç­¾æ–‡æœ¬
                </div>
                <!------------------------- divç»“æŸ ------------------------->
            </div>
            <!------------------------- divç»“æŸ ------------------------->
        </div>
        <!------------------------- divç»“æŸ ------------------------->

        <!------------------------- scriptï¼šJavaScriptä»£ç åŒºåŸŸï¼Œå®ç°äº¤äº’åŠŸèƒ½ ------------------------->
        <script>
            // å…¨å±€å˜é‡ï¼šå­˜å‚¨æ‰€æœ‰æšä¸¾æ•°æ®
            let all_enums = {};
            
            // å…¨å±€å˜é‡ï¼šå­˜å‚¨æ‰€æœ‰é€‰æ‹©çš„å€¼
            let all_selections = {};
            
            // å‡½æ•°ï¼šåŠ è½½æ‰€æœ‰æšä¸¾æ•°æ®
            async function Load_All_Enums() {
                try {
                    // ä»dataç›®å½•åŠ è½½æšä¸¾æ•°æ®
                    const response = await fetch('data/enums.json');
                    all_enums = await response.json();
                    
                    // æ¸…ç©ºä¸‹æ‹‰æ¡†å®¹å™¨
                    const container = document.getElementById('dropdowns_container');
                    container.innerHTML = '';
                    
                    // éå†æ‰€æœ‰æšä¸¾ï¼Œåˆ›å»ºä¸‹æ‹‰æ¡†
                    for (const [category, items] of Object.entries(all_enums)) {
                        // åˆ›å»ºåˆ†ç±»åŒºåŸŸ
                        const categoryDiv = document.createElement('div');
                        categoryDiv.className = 'category-section';
                        
                        // åˆ›å»ºåˆ†ç±»æ ‡é¢˜
                        const titleDiv = document.createElement('div');
                        titleDiv.className = 'category-title';
                        titleDiv.textContent = category;
                        categoryDiv.appendChild(titleDiv);
                        
                        // åˆ›å»ºä¸‹æ‹‰æ¡†
                        const select = document.createElement('select');
                        select.id = category;
                        select.onchange = function() {
                            all_selections[category] = this.value;
                        };
                        
                        // æ·»åŠ é»˜è®¤é€‰é¡¹
                        const defaultOption = document.createElement('option');
                        defaultOption.value = '';
                        defaultOption.textContent = '-- è¯·é€‰æ‹© --';
                        select.appendChild(defaultOption);
                        
                        // æ·»åŠ é€‰é¡¹
                        for (const item of items) {
                            const option = document.createElement('option');
                            option.value = item;
                            option.textContent = item;
                            select.appendChild(option);
                        }
                        
                        categoryDiv.appendChild(select);
                        container.appendChild(categoryDiv);
                    }
                    
                    // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                    alert('âœ… æ ‡ç­¾é€‰é¡¹åŠ è½½æˆåŠŸï¼');
                } catch (error) {
                    console.error('åŠ è½½æšä¸¾æ•°æ®å¤±è´¥ï¼š', error);
                    alert('âŒ åŠ è½½æ ‡ç­¾é€‰é¡¹å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–åˆ·æ–°é¡µé¢é‡è¯•');
                }
            }
            
            // å‡½æ•°ï¼šæ¸…ç©ºæ‰€æœ‰é€‰æ‹©
            function Clear_All_Selections() {
                // æ¸…ç©ºé€‰æ‹©è®°å½•
                all_selections = {};
                
                // é‡ç½®æ‰€æœ‰ä¸‹æ‹‰æ¡†
                const selects = document.querySelectorAll('select');
                selects.forEach(select => {
                    select.value = '';
                });
                
                // æ¸…ç©ºç»“æœæ˜¾ç¤º
                document.getElementById('result').innerHTML = 'ğŸ’¡ ç‚¹å‡»"é¢„è§ˆç»“æœ"æŒ‰é’®æŸ¥çœ‹ç”Ÿæˆçš„æ ‡ç­¾æ–‡æœ¬';
                
                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                alert('âœ… æ‰€æœ‰é€‰æ‹©å·²æ¸…ç©ºï¼');
            }
            
            // å‡½æ•°ï¼šé¢„è§ˆç»“æœ
            function Preview_Result() {
                // è·å–æ‰€æœ‰éç©ºé€‰æ‹©
                const selected_values = Object.entries(all_selections)
                    .filter(([_, value]) => value !== '')
                    .map(([_, value]) => value);
                
                // ç”Ÿæˆç»“æœæ–‡æœ¬
                const result_text = selected_values.join(', ');
                
                // æ˜¾ç¤ºç»“æœ
                const result_div = document.getElementById('result');
                if (selected_values.length > 0) {
                    result_div.innerHTML = result_text;
                } else {
                    result_div.innerHTML = 'âš ï¸ è¯·å…ˆé€‰æ‹©è‡³å°‘ä¸€ä¸ªæ ‡ç­¾é€‰é¡¹';
                }
            }
            
            // å‡½æ•°ï¼šç”Ÿæˆç»“æœ
            function Generate_Result() {
                // è·å–æ‰€æœ‰éç©ºé€‰æ‹©
                const selected_values = Object.entries(all_selections)
                    .filter(([_, value]) => value !== '')
                    .map(([_, value]) => value);
                
                // ç”Ÿæˆç»“æœæ–‡æœ¬
                const result_text = selected_values.join(', ');
                
                // æ˜¾ç¤ºç»“æœ
                const result_div = document.getElementById('result');
                if (selected_values.length > 0) {
                    result_div.innerHTML = result_text;
                    alert('âœ… æ ‡ç­¾æ–‡æœ¬ç”ŸæˆæˆåŠŸï¼');
                } else {
                    result_div.innerHTML = 'âš ï¸ è¯·å…ˆé€‰æ‹©è‡³å°‘ä¸€ä¸ªæ ‡ç­¾é€‰é¡¹';
                    alert('âŒ è¯·å…ˆé€‰æ‹©è‡³å°‘ä¸€ä¸ªæ ‡ç­¾é€‰é¡¹');
                }
            }
            
            // å‡½æ•°ï¼šä¸‹è½½ç»“æœ
            function Download_Result() {
                // è·å–æ–‡ä»¶å
                const filename = document.getElementById('filename').value.trim() || 'prompt';
                
                // è·å–æ‰€æœ‰éç©ºé€‰æ‹©
                const selected_values = Object.entries(all_selections)
                    .filter(([_, value]) => value !== '')
                    .map(([_, value]) => value);
                
                // ç”Ÿæˆç»“æœæ–‡æœ¬
                const result_text = selected_values.join(', ');
                
                // æ£€æŸ¥æ˜¯å¦æœ‰é€‰æ‹©
                if (selected_values.length === 0) {
                    alert('âŒ è¯·å…ˆé€‰æ‹©è‡³å°‘ä¸€ä¸ªæ ‡ç­¾é€‰é¡¹');
                    return;
                }
                
                // åˆ›å»ºä¸‹è½½é“¾æ¥
                const blob = new Blob([result_text], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${filename}.txt`;
                
                // è§¦å‘ä¸‹è½½
                document.body.appendChild(a);
                a.click();
                
                // æ¸…ç†
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
                
                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                alert('âœ… æ–‡ä»¶ä¸‹è½½æˆåŠŸï¼');
            }
        </script>
        <!------------------------- scriptç»“æŸ ------------------------->
    </body>
    <!------------------------- bodyç»“æŸ ------------------------->
</html>
<!------------------------- htmlç»“æŸ ------------------------->